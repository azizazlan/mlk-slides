<!doctype html>
<html lang="en">

<head>
    <meta charset="utf-8" />
    <meta name="viewport" content="width=1024" />
    <meta name="apple-mobile-web-app-capable" content="yes" />
    <title>PEN & DApp</title>

    <meta name="description" content="Pembangunan Rangkaian Blockchain Ethereum dan DApp" />
    <meta name="author" content="Azlan Abd Aziz" />

    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Oswald:wght@200;300;400;500;600;700&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@200&family=Oswald:wght@200;300;400;500;600;700&family=PT+Sans&display=swap"
        rel="stylesheet">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link
        href="https://fonts.googleapis.com/css2?family=JetBrains+Mono:wght@200&family=Montserrat:wght@300&family=Oswald:wght@200;300;400;500;600;700&family=PT+Sans&display=swap"
        rel="stylesheet">
    <link href="css/impress-demo.css" rel="stylesheet" />
    <link href="css/impress-common.css" rel="stylesheet" />

    <link rel="shortcut icon" href="favicon.png" />
    <link rel="apple-touch-icon" href="apple-touch-icon.png" />
</head>

<body class="impress-not-supported">

    <div class="fallback-message">
        <p>Your browser <b>doesn't support the features required</b> by impress.js, so you are presented with a
            simplified version of this presentation.</p>
        <p>For the best experience please use the latest <b>Chrome</b>, <b>Safari</b> or <b>Firefox</b> browser.</p>
    </div>

    <div id="impress" data-transition-duration="1000" data-width="1024" data-height="768" data-max-scale="3"
        data-min-scale="0" data-perspective="1000" data-autoplay="0">


        <div id="Cover" class="step slide" data-x="-1600" data-y="-1500" data-autoplay="0">
            <q>Pembangunan Rangkaian Blockchain Ethereum dan DApp</q>
            <p>Jabatan Ketua Menteri Melaka.</p>
        </div>

        <div id="Objectives" class="step slide" data-x="-420" data-y="-1500">
            <h1>Objectives</h1>
            <q>To deliver a working Private Ethereum Network with 3 nodes and a basic DApp in <strong>8</strong> days
                (64hrs).</q>
        </div>

        <div id="AboutMe" class="step slide" data-x="760" data-y="-1500">
            <h1>About Me</h1>
            <q>Azlan bin Abdul Aziz</q>
            <p>Fullstack <code>Typescript</code> & <code>Rust</code> developer<br />Thuleen</p>
        </div>

        <div id="HighLevelView" class="step slide" data-x="1940" data-y="-1500">
            <h1>High level view</h1>
            <img src="./img/solution-topology.png" alt="common solution topology" class="center" />
        </div>

        <div id="Day1" class="step slide" data-x="3120" data-y="-1500">
            <h1>Day 1</h1>
            <div class="bulletslide">
                <ul>
                    <li>Install dependencies</li>
                    <li>Install VS Code, iTerm, git, ssh & etc</li>
                    <li>Plan and configure firewall, ports</li>
                    <br />
                    <li>Create Ethereum accounts</li>
                    <li>Create genesis file and initialise geth</li>
                    <li>Start geth nodes</li>
                </ul>
            </div>
        </div>
        <!-- 710 vert diff-->
        <div id="Day1-InstallDependencies" class="step slide" data-x="3120" data-y="-790">
            <h1>Install dependencies</h1>
            <div class="bulletslide">
                <ol>
                    <li>Window Subsystem for Linux or WSL
                        <ol>
                            <li>Open PowerShell and run;</li>
                            <li><code>wsl --install</code></li>
                            <li>Restart!</li>
                        </ol>
                    </li>
                    <br />
                    <li>https://nodejs.org/en
                        <ol>
                            <li>Open terminal or WSL, run;</li>
                            <li><code>node -v</code></li>
                            <li><code>npm -v</code></li>
                        </ol>
                    </li>
                </ol>
            </div>
        </div>
        <div id="Day1-InstallTools" class="step slide" data-x="3120" data-y="-80">
            <h1>Install tools</h1>
            <div class="bulletslide">
                <ol>
                    <li>https://code.visualstudio.com/</li>
                    <li>https://git-scm.com/download/win</li>
                    <li>
                        ssh on Windows is built-in by default
                        <ul>
                            <li>Open PowerShell as Administrator and run;</li>
                            <li><code>Add-WindowsCapability -Online -Name OpenSSH.Client</code> </li>
                        </ul>
                    </li>
                    <li>iTerm2 - Optional & Mac only</li>
                </ol>
            </div>
        </div>
        <div id="Day1-PlanFirewallPorts" class="step slide" data-x="3120" data-y="630">
            <h1>Plan, configure firewall & ports</h1>
            <style type="text/css">
                .tg {
                    border-collapse: collapse;
                    border-spacing: 0;
                    margin-top: 30px;
                }

                .tg td {
                    border-color: black;
                    border-style: solid;
                    border-width: 1px;
                    font-family: 'JetBrains Mono', Courier, monospace;
                    font-size: 21;
                    padding: 15px 15px 15px 15px;
                }

                .tg th {
                    border-color: black;
                    border-style: solid;
                    border-width: 1px;
                    font-family: 'JetBrains Mono', Courier, monospace;
                    font-size: 21px;
                    padding: 15px 15px 15px 15px;
                }

                .tg .tg-n6bu {
                    border-color: #9b9b9b;
                    font-weight: bold;
                    font-size: 21px;
                    text-align: center;
                    vertical-align: top
                }

                .tg .tg-2fdn {
                    border-color: #9b9b9b;
                    text-align: center;
                    vertical-align: top
                }
            </style>
            <table class="tg">
                <thead>
                    <tr>
                        <th class="tg-n6bu">Terminal</th>
                        <th class="tg-n6bu">IP Address</th>
                        <th class="tg-n6bu">HTTP Port</th>
                        <th class="tg-n6bu">TCP/UDP Port</th>
                    </tr>
                </thead>
                <tbody>
                    <tr>
                        <td class="tg-2fdn">1</td>
                        <td class="tg-2fdn">123.123.123.123</td>
                        <td class="tg-2fdn">8545</td>
                        <td class="tg-2fdn">30303</td>
                    </tr>
                    <tr>
                        <td class="tg-2fdn">2</td>
                        <td class="tg-2fdn">223.223.223.223</td>
                        <td class="tg-2fdn">8546</td>
                        <td class="tg-2fdn">30304</td>
                    </tr>
                    <tr>
                        <td class="tg-2fdn">3</td>
                        <td class="tg-2fdn">333.323.333.333</td>
                        <td class="tg-2fdn">8547</td>
                        <td class="tg-2fdn">30305</td>
                    </tr>
                </tbody>
            </table>
            <p>Note down sudo, username and password too!</p>
        </div>
        <div id="Day1-CreateEthAccs" class="step slide" data-x="3120" data-y="1340">
            <h1>Create Ethereum accounts</h1>
            <pre>
<code>
mkdir geth-net && cd geth-net 
mkdir <b>node1</b> node2 node3 <b>faucet</b> // Can have more than one faucet accounts

geth --datadir node1 account new

echo "0x...abc" > node1/account
echo "Password" > node1/password

// Do not forget to create a faucet account
</code>
            </pre>
        </div>
        <div id="Day1-CreateGenesis" class="step slide" data-x="3120" data-y="2050">
            <h1>Create genesis and initialise geth</h1>
            <pre>
                <code>
// Download or copy a genesis file template
// Edit to allocates initial balance for each node and faucet accounts

geth --datadir node1 init genesis.json
                </code>
            </pre>
        </div>
        <div id="Day1-Startgeth" class="step slide" data-x="3120" data-y="2760">
            <h1>Start geth nodes</h1>
            <p>Run the cmd below in <code>geth-net</code></p>
            <pre>
                <code>
geth --datadir node1 --networkid 12345 --syncmode full --verbosity 3 
--port 30303 --http --http.addr [machine_ip] --http.port 8545 
--http.api "eth,web3" --syncmode=full --nodiscover --nat extip:[machine_ip]
--mine --miner.etherbase "0x92...8a52" --unlock "0x92..8a52" 
--password node1/password --allow-insecure-unlock
                </code>
            </pre>
        </div>
        <div id="Day2" class="step slide" data-x="4300" data-y="-1500">
            <h1>Day 2</h1>
            <div class="bulletslide">
                <ul>
                    <li>Introduction to Geth Javascript console</li>
                    <li>Adding peer</li>
                    <br />
                    <li>Setup domain name, SSL for RPC endpoint</li>
                    <li>Configure NGINX Reverse Proxy</li>
                    <li>Configure geth background service<sup>*</sup></li>
                </ul>
                <div class="footnote">Optional and if you prefer.</div>
            </div>
        </div>
        <div id="Day2-IntroJSC" class="step slide" data-x="4300" data-y="-790">
            <h1>Introduction to Javascript console</h1>
            <br />
            <p>To attach JS console to a geth<sup>*</sup> node, run:</p>
            <div class="footnote">Ensure geth node is running.</div>
            <code>$ geth --datadir node1 attach node1/geth.ipc</code>
            <p>Example commands using module <code>admin,net</code> and <code>eth</code>:</p>
            <code>> admin.nodeInfo</code>
            <br />
            <code>> admin.peers</code>
            <br />
            <code>> net.peerCount</code>
            <br />
            <code>> eth.coinbase</code>
            <br />
            <code>> eth.blockNumber</code>
        </div>
        <div id="Day2-AddingPeer" class="step slide" data-x="4300" data-y="-80">
            <h1>Adding peer</h1>
            <br />
            <code>> admin.nodeInfo.enode</code>
            <br />
            <code>"enode://146x..0345@..?discport=0"</code>
            <br />
            <br />
            <code>> admin.addPeer(<strong>"enode://146x..?discport=0"</strong>)</code>
            <br />
            <img class="imgAddingPeer" src="./img/geth nodes.png" alt="geth nodes" />
            <div class="footnote">Quiz - How many times should we run the addPeer command so that all nodes become
                peers?</div>
        </div>
        <div id="Day2-ReverseProxy" class="step slide" data-x="4300" data-y="630">
            <h1>NGINX Reverse Proxy</h1>
            <code>
server { //Edit /etc/nginx/sites-available/default
    ..
    server_name melaka.enet.com // Contoh!
    ..
    location /rpc/ {
        proxy_pass_header  Set-Cookie;
        proxy_set_header   X-Real-IP           $remote_addr;
        proxy_set_header   X-Forwarded-For     $proxy_add_x_forwarded_for;
        proxy_set_header   X-Forwarded-Proto   $scheme;
        proxy_set_header   Host                $http_host;
        proxy_set_header   X-NginX-Proxy       true;
        proxy_pass         http://127.0.0.1:8545/;
        proxy_redirect     off;
    }        
            </code>
        </div>

        <div id="Day2-ReverseProxyPart2" class="step slide" data-x="4300" data-y="1340">
            <h1>NGINX Reverse Proxy (contd.)</h1>
            <code>
sudo nginx -t
nginx: the configuration file /etc/nginx/nginx.conf syntax is ok
nginx: configuration file /etc/nginx/nginx.conf test is successful

sudo systemctl reload nginx
sudo systemctl restart nginx
            </code>
        </div>

        <div id="Day2-GethBackgrndSvcPart1" class="step slide" data-x="4300" data-y="2050">
            <h1>Geth background service</h1>
            <code>/etc/systemd/system/geth.service</code> :
            <br />
            <code>
[Unit]
Description=Geth Ethereum client
After=network.target
[Service]
User=YOUR_USERNAME
Group=YOUR_USERNAME
ExecStart=/usr/bin/geth --GETH_OPTIONS_HERE
LimitNOFILE=4096
[Install]
WantedBy=multi-user.target
            </code>
        </div>
        <div id="Day2-GethBackgrndSvcPart2" class="step slide" data-x="4300" data-y="2760">
            <h1>Geth background service (contd)</h1>
            <br />
            <pre>
<code>sudo systemctl daemon-reload</code>
<code>sudo systemctl enable geth</code>
<code>sudo systemctl start geth</code>

<code>sudo systemctl status geth</code>
<code>sudo journalctl -u geth.service</code>
            </pre>
        </div>

        <div id="Day3" class="step slide" data-x="5480" data-y="-1500">
            <h1>Day 3</h1>
            <div class="bulletslide">
                <ul>
                    <li>Introduction to smart contract FT, NFT, ERCs</li>
                    <li>Hardhat, OpenZeppelin</li>
                    <li>Test-driven development</li>
                    <li>Propose and design a basic use case</li>
                </ul>
            </div>
        </div>

        <div id="Day3-IntroSmarContract" class="step slide" data-x="5480" data-y="-790">
            <h1>Introduction to smart contract</h1>
            <q>...self-executing <b>immutable</b> code on <b>decentralised</b> network...<br /><br />Type FT (ERC21) and
                NFT (ERC721)<sup>*</sup>
            </q>
            <p>https://ethereum.org/en/developers/docs/standards/tokens/</p>
            <div class="footnote">There are hybrid. ERC - Ethereum request for comment became the "standard".</div>
        </div>
        <div id="Day3-ContractSnippet" class="step slide" data-x="5480" data-y="-80">
            <pre>
                <code>
// SPDX-License-Identifier: MIT // or GPL, LGPL, BSD, Unlicense etc
pragma solidity ^0.8.0;

contract SalamMelaka {
    string public name;

    constructor(string memory _name) {
        name = _name;
    }

    function salam() public view returns (string memory) {
        return string(abi.encodePacked("Assalamualaikum, ", name, "!"));
    }
}
                </code>
            </pre>
        </div>
        <div id="Day3-HardhatOpenZep" class="step slide" data-x="5480" data-y="630">
            <h1>Hardhat & OpenZeppelin</h1>
            <p><b><i>Hardhat</i></b> is a <u>development environment</u> for Ethereum. (https://hardhat.org/docs)
            <p>
            <p><b><i>OpenZeppelin</i></b> is smart contract <u>libraries</u> that provides <u>reusable</u> components
                and
                <u>security</u>.
                (https://www.openzeppelin.com/)
            </p>
            <p>Let's dive in and use Hardhat to build a smart contract!</p>
        </div>
        <div id="Day3-SCDevPart1" class="step slide" data-x="5480" data-y="1340">
            <h1>Smart contract dev - Part 1</h1>
            <pre>
                <code>
    mkdir smart-contract-1 && cd smart-contract-1

    npx hardhat
    > Create a TypeScript project, then ENTER, y and y.
    npx hardhat compile
    npx hardhat test

    // Create SalamMelaka.sol file in the contracts directory
    // Create SalamMelaka.ts file in the tests directory

    npx hardhat test

    // Create a new smart contract function - from test to solidity
                </code>
            </pre>
            <div class="footnote">
                git clone from https://github.com/azizazlan/smart-contract-1.git
            </div>

            <div class="notes">
                1. Add await salamMelaka.changeName("Idris Jusoh") in new "it" block in the test file;
                2. Add the new function changeName in the solidity file.
                3. npx hardhat compile // you notice the error gone!
            </div>
        </div>
        <div id="Day3-SCDevPart2" class="step slide" data-x="5480" data-y="2050">
            <h1>Smart contract dev - Part 2</h1>
            <pre>
                <code>
    ...
    import "@openzeppelin/contracts/access/Ownable.sol";

    contract SalamMelaka is <b style="color: blue; background-color: gainsboro;">Ownable</b> {
        string public name;

        event NameChanged(string value);
        ...
        function changeName(string memory _name) public <b style="color: blue; background-color: gainsboro;">onlyOwner</b> {
            name = _name;
            emit NameChanged(_name);
        }
        ...
    }
                </code>
            </pre>
            <div class="notes">
                <pre>
1.Create a new hardhat project. 
2.Then install OZ:
npm install @openzeppelin/contracts

3.Copy file SalamMelaka.sol and edit:
 - add event, 
 - inheritance Ownable and;
 - onlyOwner modifier.

 4.Add test file

 it("Should revert when non-owner attempt to change", async function () {
    const { salamMelaka, owner, otherAccount } = await loadFixture(
      deploySalamMelaka
    );

    await expect(salamMelaka.connect(otherAccount).changeName("Idris Jusoh"))
      .to.be.reverted;
  });
                </pre>
            </div>
        </div>
        <div id="Day3-DesignUseCase" class="step slide" data-x="5480" data-y="2760">
            <h1>Use case</h1>
        </div>

        <div id="Day4" class="step slide" data-x="6660" data-y="-1500">
            <h1>Day 4</h1>
            <div class="bulletslide">
                <ul>
                    <li>Continue developing smart contract(s)</li>
                </ul>
            </div>
        </div>

        <div id="Day5" class="step slide" data-x="7840" data-y="-1500">
            <h1>Day 5</h1>
            <div class="bulletslide">
                <ul>
                    <li>Introduction to React and MUI</li>
                    <li>React state management - Redux</li>
                    <br />
                    <li>Combine Hardhat and React projects as one</li>
                    <li>Continue developing DApp...</li>
                </ul>
            </div>
        </div>

        <div class="step slide" data-x="9020" data-y="-1500">
            <h1>Day 6 and 7</h1>
            <div class="bulletslide">
                <ul>
                    <li>Coding session - complete the DApp</li>
                </ul>
            </div>
        </div>

        <div class="step slide" data-x="10200" data-y="-1500">
            <h1>Day 8</h1>
            <div class="bulletslide">
                <ul>
                    <li>Deploying DApp and test</li>
                    <li>Review</li>
                    <li>Conclusion, Q&A</li>
                </ul>
            </div>
        </div>
    </div>
    <!--
    This is a UI plugin. You can read more about plugins in src/plugins/README.md.
    For now, I'll just tell you that this adds some graphical controls to navigate the
    presentation. In the CSS file you can style them as you want. We've put them bottom right.
    -->
    <div id="impress-toolbar"></div>
    <div class="hint">
        <p>Use a spacebar or arrow keys to navigate. <br />
            Press 'P' to launch speaker console.</p>
    </div>
    <script>
        if ("ontouchstart" in document.documentElement) {
            document.querySelector(".hint").innerHTML = "<p>Swipe left or right to navigate</p>";
        }
    </script>
    <script src="js/impress.js"></script>
    <script>impress().init();</script>
</body>

</html>